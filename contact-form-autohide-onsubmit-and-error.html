<script>
    jQuery(document).ready(($) => {

        var $formFields = $('.gw-contact-form .elementor-form-fields-wrapper');

        // hide form when SUCCESS
        $(document).on('submit_success', '.gw-contact-form', (e) => {
            console.debug("form submission successful");
            $formFields.hide();

            var $form2 = $('#accidental_donation_form');
            $form2.parentsUntil('.dialog-lightbox-widget-content').height('auto');
            $form2.children().not('.elementor-message').hide();
            $form2.parent().parent().siblings().hide();
        });

        // hide form when ERROR
        function checkIfErrorExists() {
            var $formErrorScreen = $('.gw-contact-form .elementor-message-danger');

            if ($formErrorScreen.length > 0) {
                initErrorMods();
            }
        }

        var $button = $('.gw-contact-form button[type="submit"]');
        var observer = new MutationObserver(function (mutations) {
            checkIfErrorExists();
        });

        // show form when TRY AGAIN
        function initErrorMods() {
            var $tryAgainBUtton = $('.gw-contact-form a[href="javascript:location.reload()"][aria-label="try again message button"]');
            var $formErrorScreen = $('.gw-contact-form .elementor-message-danger');
            $formErrorScreen.show();
            $formFields.hide();
            $tryAgainBUtton.on('click', function (e) {
                e.preventDefault();
                $formFields.show();
                $formErrorScreen.hide();
            });
        }

    });


</script>